# Развертывание на Render.com

## Пошаговая инструкция

### 1. Подготовка репозитория

Убедитесь, что в вашем GitHub репозитории есть:
- ✅ `Dockerfile`
- ✅ `build.gradle.kts` с правильными зависимостями
- ✅ `Main.kt` с настройкой порта из переменной окружения
- ✅ Все исходные файлы Kotlin

### 2. Регистрация на Render.com

1. Перейдите на [render.com](https://render.com/)
2. Зарегистрируйтесь или войдите в аккаунт
3. Подключите ваш GitHub аккаунт

### 3. Создание Web Service

1. В Dashboard нажмите **"New +"**
2. Выберите **"Web Service"**
3. Подключите ваш GitHub репозиторий
4. Выберите репозиторий `HIREHI_KOTLIN`

### 4. Настройка сервиса

**Основные настройки:**
- **Name**: `hirehi-kotlin` (или любое другое имя)
- **Runtime**: `Docker`
- **Build Command**: (оставить пустым)
- **Start Command**: (оставить пустым)
- **Environment**: `Docker` (не важно, что написано)

**Дополнительные настройки:**
- **Plan**: `Free` (для тестирования)
- **Region**: `Oregon (US West)` (ближайший к России)
- **Branch**: `main`

### 5. Переменные окружения

Добавьте переменные окружения (опционально):
- `PORT`: `10000` (по умолчанию уже настроено в коде)

### 6. Развертывание

1. Нажмите **"Create Web Service"**
2. Render автоматически:
   - Клонирует репозиторий
   - Соберет Docker образ
   - Запустит приложение
3. Дождитесь завершения деплоя (5-10 минут)

### 7. Проверка работы

После успешного развертывания:
- Получите URL вида: `https://hirehi-kotlin.onrender.com`
- Откройте в браузере
- Проверьте работу API:
  - `GET /` - главная страница
  - `GET /api/jobs` - JSON с вакансиями
  - `POST /api/refresh` - обновление данных
  - `GET /api/status` - статус приложения

## Возможные проблемы и решения

### Проблема: Build failed
**Решение:**
- Проверьте, что все файлы закоммичены в Git
- Убедитесь, что `Dockerfile` находится в корне репозитория
- Проверьте логи сборки в Render Dashboard

### Проблема: Application failed to start
**Решение:**
- Проверьте, что порт настроен правильно: `System.getenv("PORT")?.toIntOrNull() ?: 10000`
- Убедитесь, что все зависимости указаны в `build.gradle.kts`

### Проблема: 404 Not Found
**Решение:**
- Проверьте, что маршруты настроены правильно в `Main.kt`
- Убедитесь, что приложение запускается без ошибок

### Проблема: Free tier limitations
**Решение:**
- Free tier имеет ограничения: 750 часов в месяц
- Приложение "засыпает" после 15 минут без активности
- Для продакшена рекомендуется Starter план ($7/месяц)

## Автоматическое развертывание

После настройки:
- При каждом push в `main` ветку будет происходить автоматический деплой
- Render будет пересобирать и перезапускать приложение
- Время деплоя: 5-10 минут

## Мониторинг

В Render Dashboard доступны:
- **Logs** - логи приложения
- **Metrics** - метрики производительности
- **Events** - история деплоев

## Обновление приложения

Для обновления:
1. Внесите изменения в код
2. Закоммитьте и запушьте в `main` ветку
3. Render автоматически развернет новую версию

## Стоимость

- **Free**: 750 часов/месяц, spin-down после 15 мин без активности
- **Starter**: $7/месяц, всегда работает, больше ресурсов
- **Standard**: $25/месяц, для высоконагруженных приложений
